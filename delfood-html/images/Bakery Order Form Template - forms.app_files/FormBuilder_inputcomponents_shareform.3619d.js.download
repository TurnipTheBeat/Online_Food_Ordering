(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/WNs":function(e,t,r){"use strict";var o=r("lSNA"),n=r.n(o),i=r("yXPU"),a=r.n(i),l=(r("4mDm"),r("5s+n"),r("3bBZ"),r("NRfZ")),s=r("iAnd"),u=r("mSNy"),c=r("iKgg");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f,m=Object(c.a)("auth");t.a={createFineUploaderTraditional:(f=a()((function*(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{multiple:!1};r.e(134).then(r.t.bind(null,"A6Vn",7)).then(r=>{var i=r.default,a=m.createRequestUrl("uploadformtempfile");o(new i({options:p({request:{endpoint:l.a.fileApi+"/"+a,customHeaders:{Authorization:"Bearer ".concat(t)},method:"POST",params:{formId:e._id,formSession:e.uploadSession},inputName:"file"},validation:{allowedExtensions:["jpg","jpeg","png"]},scaling:{includeExif:!1,sendOriginal:!1,orient:!1,sizes:[{name:"medium",maxSize:2560}]}},n)}))})})),function(e,t,r){return f.apply(this,arguments)}),uploaderValidate:function(e){e.uploader.on("Validate",t=>{if(!e.$auth.isAuthenticated())return e.$swal({title:u.default.t("popups.mustLogin.title"),text:u.default.t("popups.mustLogin.text"),icon:"warning",cancelButtonColor:e.$theme.red,showCancelButton:!0,confirmButtonText:u.default.t("login"),cancelButtonText:u.default.t("cancel"),confirmButtonColor:e.$theme.blue}).then(t=>{t.value&&e.$router.push({name:"SignIn"})}),!1})},uploaderSubmitted:function(e){e.uploader.on("submitted",t=>{e.lock=!0,e.$setAppVueVariable("showMainLoader",!0),e.errMsg=null,e.state.submittedFiles=[t],e.$set(e.state,"submittedFiles",[t])})},uploaderOnError:function(e){e.uploader.on("onError",function(){var t=a()((function*(t,r,o,n){e.$setAppVueVariable("showMainLoader",!1),n||(e.errMsg=o,e.lock=!1)}));return function(e,r,o,n){return t.apply(this,arguments)}}())},uploaderComplete:function(e){e.uploader.on("complete",function(){var t=a()((function*(t,r,o,n){var i=!0;if(o){var a=!0;if(o.formSession&&(e.formModel.uploadSession=o.formSession,e.uploader.methods._options.request.params.formSession=e.formModel.uploadSession),o.fileId)e.$set(e.activeUploadItem,"fileId",o.fileId),e.formModel.formTempFiles[o.fileId]={type:"generic"},a=!1;else if(o.errorCode&&2===o.errorCode){if(!e.createUserCalled)(yield s.a.createUser())&&(e.uploader.methods.retry(t),i=!1,a=!1);e.createUserCalled=!0}else if(o.error)e.errMsg=o.error;else{var l=" ".concat(e.$root.$t("notification.traceCode"),": FUH0001");e.errMsg=e.$root.$t("notification.anErrorOccurred",{moreDetail:l})}a&&(e.state.submittedFiles=[],e.$set(e.state,"submittedFiles",[])),i&&(e.lock=!1,e.$setAppVueVariable("showMainLoader",!1))}}));return function(e,r,o,n){return t.apply(this,arguments)}}())},onFilesSelected(e,t){e.methods.addFiles(t.target)},addItemFile:function(e){var t=document.getElementById(e);t.value="",t.removeAttribute("multiple",""),t.click()},getFileSrc:function(e,t,r,o){return!t||""===t||o&&void 0!==o?t&&o?l.a.fileApi+"/tempfile/"+e+"/"+t:r||"/static/img/no-image.png":l.a.fileApi+"/formfile/"+e+"/"+t},removeFile:function(e){e.$set(e.activeUploadItem,"fileId","")}}}}]);