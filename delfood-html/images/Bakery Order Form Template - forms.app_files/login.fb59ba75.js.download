null!==localStorage.getItem("authToken")?(loginBar=document.querySelector(".login-bar"))&&(document.querySelector(".login-bar").style.display="none"):((s=document.createElement("style")).innerHTML=".intercom-launcher { bottom: 100px!important; }",document.head.appendChild(s));var loginBar,s,params,baseUrl=location.protocol+"//"+location.hostname,baseServiceUrl=location.protocol+"//api."+location.hostname,tokenKey="authToken",hostname=window.location.hostname,mode="prod",providers=("forms.ws"===hostname?mode="stage":"forms.city"===hostname?mode="devserver":"forms.local"===hostname&&(mode="dev"),{google:{baseUrl:"https://accounts.google.com/o/oauth2/auth",callbackUrl:baseServiceUrl+"/auth/externallogin/google",params:{prod:{client_id:"217206971805-365a4q8t8h1iqkp3tmtefoo6hruatg9b.apps.googleusercontent.com",redirect_uri:baseUrl+"/auth/google/callback",display:"popup",scope:"openid profile email",response_type:"code"},stage:{client_id:"473187769571-0r4frd3mbkb8m1vfaf85hm7imkv0msn5.apps.googleusercontent.com",redirect_uri:baseUrl+"/auth/google/callback",display:"popup",scope:"openid profile email",response_type:"code"},devserver:{client_id:"473187769571-om8793ao8tk9q0c3lpt5k475798doodc.apps.googleusercontent.com",redirect_uri:baseUrl+"/auth/google/callback",display:"popup",scope:"openid profile email",response_type:"code"},dev:{client_id:"473187769571-om8793ao8tk9q0c3lpt5k475798doodc.apps.googleusercontent.com",redirect_uri:baseUrl+"/auth/google/callback",display:"popup",scope:"openid profile email",response_type:"code"}}},facebook:{baseUrl:"https://graph.facebook.com/oauth/authorize",callbackUrl:baseServiceUrl+"/auth/externallogin/facebook",params:{prod:{client_id:"2145744282377800",redirect_uri:baseUrl+"/auth/facebook/callback",display:"popup",scope:"email"},stage:{client_id:"2145744282377800",redirect_uri:baseUrl+"/auth/facebook/callback",display:"popup",scope:"email"},devserver:{client_id:"2145744282377800",redirect_uri:baseUrl+"/auth/facebook/callback",display:"popup",scope:"email"},dev:{client_id:"2145744282377800",redirect_uri:baseUrl+"/auth/facebook/callback",display:"popup",scope:"email"}}},apple:{baseUrl:"https://appleid.apple.com/auth/authorize",callbackUrl:baseServiceUrl+"/auth/externallogin/apple",params:{prod:{client_id:"web.form.app.singin",redirect_uri:baseUrl+"/auth/apple/callback",display:"popup",response_type:"code",state:"state"},stage:{client_id:"web.form.app.singin",redirect_uri:baseUrl+"/auth/apple/callback",display:"popup",response_type:"code",state:"state"},devserver:{client_id:"web.form.app.singin",redirect_uri:baseUrl+"/auth/apple/callback",display:"popup",response_type:"code",state:"state"},dev:{client_id:"web.form.app.singin",redirect_uri:baseUrl+"/auth/apple/callback",display:"popup",response_type:"code",state:"state"}}},stackoverflow:{baseUrl:"https://stackoverflow.com/oauth",callbackUrl:baseServiceUrl+"/auth/externallogin/stackoverflow",params:{prod:{client_id:18702,redirect_uri:baseUrl+"/auth/stackoverflow/callback",display:"popup",response_type:"code",state:"state"},stage:{client_id:19001,redirect_uri:baseUrl+"/auth/stackoverflow/callback",display:"popup",response_type:"code",state:"state"},devserver:{client_id:19001,redirect_uri:baseUrl+"/auth/stackoverflow/callback",display:"popup",response_type:"code",state:"state"},dev:{client_id:19001,redirect_uri:baseUrl+"/auth/stackoverflow/callback",display:"popup",response_type:"code",state:"state"}}},email:{redirect_uri:baseUrl+"/auth/signup"}});function loginClick(o){var a,r,l,i=providers[o];"email"===o?window.location=i.redirect_uri:isAuthenticated()?window.location=baseUrl+"/myforms":(a=i.params[mode],r=window.open(httpBuildQuery(i.baseUrl,a),"_blank","width=580,height=450"),l=setInterval(function(){r&&!r.closed||(clearInterval(l),l=null);try{var e,t;getFullUrlPath(r.location)===a.redirect_uri&&(r.location.search||r.location.hash)&&(e=parseQueryString(r.location.search.substring(1).replace(/\/$/,"")),t=parseQueryString(r.location.hash.substring(1).replace(/[\/$]/,"")),params=objectExtend({},e),params=objectExtend(params,t),clearInterval(l),l=null,r.close(),generateToken(params,o,i.callbackUrl,a.redirect_uri))}catch(e){}},250))}function isAuthenticated(){var e=localStorage.getItem(tokenKey);if(e){if(3===e.split(".").length)try{var t=e.split(".")[1].replace("-","+").replace("_","/"),o=JSON.parse(window.atob(t)).exp;if("number"==typeof o)return Math.round((new Date).getTime()/1e3)<o}catch(e){return!0}return!0}return!1}function generateToken(e,t,o,a){var r=new XMLHttpRequest;r.open("POST",o),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){var e=JSON.parse(this.responseText);200!==this.status&&304!==e.fieldErrors[0].error.errorCode&&301!==e.fieldErrors[0].error.errorCode?(localStorage.setItem("referrerApiResponse",this.responseText),window.location=baseUrl+"/auth/"+t+"/confirmation"):200===this.status&&(localStorage.setItem(tokenKey,e.access_token),window.location=baseUrl+"/myforms",window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"genericEventGA4",category:"user",action:"login",label:"bf - "+t}))},e.redirectUri=a,r.send(JSON.stringify(e))}function httpBuildQuery(e,t){if(void 0===t||"object"!=typeof t)return t={};var o,a="?",r=0;for(o in t){r++;var l=o,i=t[o];a+=1==r?l+"="+i:"&"+l+"="+i}return e+a}function getFullUrlPath(e){return e.protocol+"//"+e.hostname+(/^\//.test(e.pathname)?e.pathname:"/"+e.pathname)}function parseQueryString(e){for(var t={},o=(e||"").split("&"),a=0;a<o.length;a++){var r=o[a];r&&(r=r.split("="),t[decodeURIComponent(r[0])]=!r[1]||decodeURIComponent(r[1]))}return t}function objectExtend(t,o){return null==t||null==o||Object.keys(o).forEach(function(e){"[object Object]"!=Object.prototype.toString.call(o[e])||"[object Object]"!=Object.prototype.toString.call(t[e])?t[e]=o[e]:t[e]=objectExtend(t[e],o[e])}),t}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var r=o[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function googleOneTap(e){["signin","signup","use"].includes("use");var t=document.createElement("script");t.setAttribute("src","https://accounts.google.com/gsi/client"),document.head.appendChild(t),window.onload=function(){window.google&&window.google.accounts&&window.google.accounts.id&&(window.google.accounts.id.initialize({client_id:providers.google.params[mode].client_id,callback:e,auto_select:!1,cancel_on_tap_outside:!1,context:"use"}),window.google.accounts.id.prompt())}}isAuthenticated()||googleOneTap(function(e){var t="google",o=providers[t].params[mode];generateToken({provider:t,providerAccessToken:e.credential,language:getCookie("language")||"en"},t,baseServiceUrl+"/auth/externalaccesstokenregister",o.redirect_uri)});