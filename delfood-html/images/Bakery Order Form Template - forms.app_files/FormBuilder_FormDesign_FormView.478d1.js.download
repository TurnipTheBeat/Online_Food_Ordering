(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4v4t":function(t,i,e){"use strict";e("toAj");var s,n=e("bRvd"),o=!1,r=document.getElementsByTagName("html")[0],u=0,l=0,h=(t,i,e,s)=>{if(e>0)return!1;for(var n=t.target;n;){if(n.className&&"string"==typeof n.className&&n.className.indexOf("question")>-1)return!0;var o=n.scrollHeight-(n.scrollTop+n.clientHeight);if(i){if(0===n.scrollTop&&"auto"===getComputedStyle(n).overflowY)return!1;if(o>0&&0===n.scrollTop&&n.scrollHeight>n.clientHeight)return!0;if(o>0)return!1}else{if(n.scrollTop>0)return!1;if(o>0)return!0}n=n.parentElement||n.parent}return!0};i.a={name:"CardDesignMixin",data:function(){return{invalidQuestions:[],currentQuestion:{questionModel:{_id:""},$parent:{}},initQuestionId:null,cardDesign:{currentQuestionNumber:0},isFormDesign:!1,submitButtonVisibleForCardDesign:!1,questionFocused:!0}},methods:{formLoadedForCardDesign:function(){this.isCardDesign&&(window.scrollTo(0,0),document.body.addEventListener("keydown",this.onKeyDown,!1))},onKeyDown:function(t){if(!this.$root.isMobile&&13===t.keyCode&&!t.shiftKey)if(this.isFormDesign)this.scrollToNextQuestion();else{if(this.submitButtonVisibleForCardDesign)return this.onSubmit();this.validateAndNextQuestion()}},initCardDesign:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isFormDesign=t,window.scrollTo(0,0),this.$nextTick(()=>{this.filteredQuestions&&this.filteredQuestions.length>0&&(this.cardDesign.currentQuestionNumber=1,this.initQuestionId=this.initQuestionId||this.filteredQuestions[0]._id,this.scrollToQuestionId(this.initQuestionId))}),document.body.style.overflow="hidden",!this.$root.mobileApp&&this.$root.isIframe||(window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("touchstart",this.onTouchStart,!1),window.addEventListener("touchmove",this.onTouchMove,!1),window.addEventListener("wheel",this.onWheel))},scrollToQuestionId:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hideSubmitButton(),!t||this.showWelcomePage||this.currentQuestion&&t===this.currentQuestion.questionModel._id||(this.$refs.questions?this.questionFocused&&(this.questionFocused=!1,this.$refs&&this.$refs.questions&&this.$refs.questions.length>0?(this.currentQuestion=this.$refs.questions.find(i=>i.questionModel._id===t),this.currentQuestion?r=this.currentQuestion.$parent.$el.children[0]:(this.currentQuestion={questionModel:{_id:t}},r=document.getElementById(t).parentNode.children[0])):(this.currentQuestion={questionModel:{_id:t}},r=document.getElementById(t).parentNode.children[0]),this.formData&&(this.cardDesign.currentQuestionNumber=this.formData.questionsMap[t].viewHelpers.questionNumber),this.scrollCurrentScrollBody(),setTimeout(()=>{if(this.questionFocused=!0,o=!1,this.currentQuestion.comps&&i&&!this.isFormDesign&&(!this.$root.isMobile||this.$root.isMobileKeyboardOpen)){var t=this.currentQuestion.getFirstElementByProp(this.currentQuestion.comps,"focus");t&&t.focus&&!t.isFocused&&(t.focus(),this.scrollCurrentScrollBody())}},500)):setTimeout(()=>{this.scrollToQuestionId(t)},200))},scrollToQuestion:function(t){return this.scrollToQuestionId(t._id)},scrollToQuestionIndex:function(t){return this.scrollToQuestionId((this.filteredQuestions[t]||{})._id)},scrollToNextQuestion:function(t){if(!this.currentQuestion)return this.initCardDesign();if(this.formData.baseSettings&&this.formData.baseSettings.questionMustValid&&!0!==t)return this.validateAndNextQuestion();if(!this.showSubmitButton()){var i=this.filteredQuestions.findIndex(t=>t._id===this.currentQuestion.questionModel._id);this.scrollToQuestionIndex(i+1)}},scrollToPrevQuestion:function(){if(!this.hideSubmitButton()){var t=this.filteredQuestions.findIndex(t=>t._id===this.currentQuestion.questionModel._id);this.scrollToQuestionIndex(t-1)}},validateAndNextQuestion:function(){this.showWelcomePage?this.onClickChild(!1):this.currentQuestion&&(this.currentQuestion.nextQuestion?this.currentQuestion.nextQuestion(null,t=>{t?this.invalidQuestions.length>0?this.scrollToQuestionId(this.removeInvalidArray()):this.scrollToNextQuestion(!0):t||this.scrollCurrentScrollBody()}):this.scrollToNextQuestion(!0))},removeInvalidArray:function(){if(this.invalidQuestions.length>0){var t=this.invalidQuestions.findIndex(t=>t._id===this.currentQuestion.questionModel._id);return-1===t?this.getFirstInvalidQuestionId():this.invalidQuestions.length>0?(this.invalidQuestions.splice(t,1),this.getFirstInvalidQuestionId()):(this.invalidQuestions.splice(t,1),this.lastQuestion._id)}},getFirstInvalidQuestionId:function(){if(this.invalidQuestions.length>0){for(var t=this.invalidQuestions[0],i=0;i<this.invalidQuestions.length;i++)this.invalidQuestions[i].displayOrder<t.displayOrder&&(t=this.invalidQuestions[i]);return t._id}return this.lastQuestion._id},onWheel:function(t){this.onScrolling(t.wheelDeltaY||-t.deltaY,t)},onTouchStart:function(t){o=!1,u=t.touches[0].clientY,l=t.touches[0].clientX},onTouchMove:function(t){t.touches&&t.touches.length>0&&Math.abs(t.touches[0].clientY-u)>Math.abs(t.touches[0].clientX-l)&&this.onScrolling(t.touches[0].clientY-u,t)},onScrolling:function(t,i){if(!window.lockCardDesign&&!(this.showWelcomePage||(this.questionFocused&&(clearTimeout(s),s=setTimeout(()=>{o=!1},100)),1>Math.abs(t)||o)))if(t<0){var e=r.scrollHeight-(r.scrollTop+r.clientHeight);e>.5&&(o=!0),e<=2&&!o&&(o=!0,h(i,!0,this.$root.openPopupCount)&&this.scrollToNextQuestion())}else if(t>0){if(this.hideSubmitButton())return void(o=!0);r.scrollTop>0&&(o=!0),r.scrollTop<=2&&!o&&(o=!0,h(i,!1,this.$root.openPopupCount)&&this.scrollToPrevQuestion())}},onScroll:function(){o&&window.scrollTo(0,0)},destroyCardDesign:function(){document.body.style.overflow=null,window.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("touchstart",this.onTouchStart,!1),window.removeEventListener("touchmove",this.onTouchMove,!1),window.removeEventListener("wheel",this.onWheel),document.body.removeEventListener("keydown",this.onKeyDown,!1)},showSubmitButton:function(){if(!this.isFormDesign&&this.currentQuestion&&this.currentQuestion.questionModel._id===this.lastQuestion._id){if(!this.questionFocused)return!1;if(!this.formData.submitButton.isShow)return this.fireEventForSubmitButton(),!0;this.submitButtonVisibleForCardDesign=!0;var t=this.currentQuestion&&this.currentQuestion.$el.parentNode.clientHeight||window.innerHeight,i=window.innerHeight-250,e=t-window.innerHeight;if(e>-350&&this.currentQuestion&&this.currentQuestion.$el){var s="-250px";e<-200&&(s="".concat(250+e,"px")),this.currencQuestionBody.style.transform="translateY(".concat(s,")")}return this.$refs.submitButton&&(this.$refs.submitButton.$el.style.transform="translate(-50%, ".concat(i,"px)")),this.fireEventForSubmitButton(),!0}return!1},hideSubmitButton:function(){return!(this.isFormDesign||!this.submitButtonVisibleForCardDesign)&&(this.submitButtonVisibleForCardDesign=!1,this.currentQuestion&&(this.currencQuestionBody.style.transform=null),this.$refs.submitButton&&(this.$refs.submitButton.$el.style.transform="translate(-50%, ".concat(window.innerHeight+250,"px)")),!0)},scrollCurrentScrollBody:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(!r||!r.scrollTo)&&this.currentQuestion&&this.currentQuestion.$parent&&this.currentQuestion.$parent.$el&&this.currentQuestion.$parent.$el.children&&this.currentQuestion.$parent.$el.children.length>0&&(r=this.currentQuestion.$parent.$el.children[0]),r&&r.scrollTo&&r.scrollTo(0,t)},fireEventForSubmitButton:function(){n.a.fireGenericAnalyticEvent({category:"form_view",action:"view_submit_button",label:"step_view"})}},beforeDestroy:function(){this.isCardDesign&&this.destroyCardDesign()},computed:{isCardDesign:function(){return this.formData&&this.formData.baseSettings&&this.formData.baseSettings.cardDesign},isCardDesignFadeIn:function(){return this.formData&&this.formData.baseSettings&&this.formData.baseSettings.cardDesignFadeIn},isBackButton:function(){return this.formData&&this.formData.baseSettings&&this.formData.baseSettings.backButton},lastQuestionNumber:function(){return(this.lastQuestion.viewHelpers||{}).questionNumber||0},lastQuestion:function(){return this.filteredQuestions[this.filteredQuestions.length-1]||{}},cardDesignPercent:function(){return this.lastQuestionNumber&&this.cardDesign&&this.cardDesign.currentQuestionNumber?(100*this.cardDesign.currentQuestionNumber/this.lastQuestionNumber).toFixed(0):"0"},formData:function(){return this.formModel||this.form},currencQuestionBody:function(){return document.getElementById(this.currentQuestion.questionModel._id)}}}}}]);